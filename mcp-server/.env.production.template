# Production Environment Configuration Template
# Generated by Copilot
# Copy this file to .env.production and update values

# ==============================================
# NODE.JS & MCP SERVER CONFIGURATION
# ==============================================
NODE_ENV=production
MCP_PORT=3000
LOG_LEVEL=info
LOG_FILE=/var/log/polymind/mcp-server.log

# ==============================================
# POSTGRESQL DATABASE CONFIGURATION
# ==============================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=polymind_prod
POSTGRES_USER=polymind_user
# SECURITY: Generate strong password using: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD

# ==============================================
# CHROMADB VECTOR DATABASE CONFIGURATION
# ==============================================
CHROMADB_HOST=chromadb
CHROMADB_PORT=8000
CHROMADB_PERSIST_DIR=/chroma/chroma_data
# SECURITY: Generate auth credentials for ChromaDB
CHROMADB_AUTH_CREDENTIALS=CHANGE_ME_TO_SECURE_CREDENTIALS

# ==============================================
# OLLAMA AI MODEL CONFIGURATION
# ==============================================
OLLAMA_HOST=ollama
OLLAMA_PORT=11434
OLLAMA_MODEL=nomic-embed-text
OLLAMA_MODELS_PATH=/root/.ollama/models

# ==============================================
# MONITORING & ALERTING
# ==============================================
# Prometheus configuration
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=15d

# Grafana configuration
GRAFANA_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD
GRAFANA_PORT=3001

# ==============================================
# SSL/TLS CONFIGURATION
# ==============================================
# SSL certificate paths (if using HTTPS)
SSL_CERT_PATH=/etc/ssl/certs/polymind.crt
SSL_KEY_PATH=/etc/ssl/private/polymind.key

# ==============================================
# BACKUP CONFIGURATION
# ==============================================
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_LOCATION=/var/backups/polymind

# ==============================================
# SECURITY CONFIGURATION
# ==============================================
# API security
API_KEY=CHANGE_ME_TO_SECURE_API_KEY
JWT_SECRET=CHANGE_ME_TO_SECURE_JWT_SECRET

# Rate limiting
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=900  # 15 minutes in seconds

# CORS configuration
CORS_ORIGIN=https://yourdomain.com
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS

# ==============================================
# PERFORMANCE TUNING
# ==============================================
# Connection pooling
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# Embedding batch size
EMBEDDING_BATCH_SIZE=100
EMBEDDING_TIMEOUT=30000

# Vector search configuration
VECTOR_SEARCH_LIMIT=100
VECTOR_SIMILARITY_THRESHOLD=0.7

# ==============================================
# PRODUCTION DOMAIN CONFIGURATION
# ==============================================
DOMAIN_NAME=mcp.yourdomain.com
ADMIN_EMAIL=admin@yourdomain.com

# ==============================================
# DOCKER CONFIGURATION
# ==============================================
COMPOSE_PROJECT_NAME=polymind_prod
COMPOSE_FILE=docker-compose.yml:docker-compose.prod.yml

# ==============================================
# RESOURCE LIMITS
# ==============================================
# MCP Server resources
MCP_SERVER_MEMORY_LIMIT=2G
MCP_SERVER_CPU_LIMIT=2.0

# PostgreSQL resources
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_CPU_LIMIT=1.0

# ChromaDB resources
CHROMADB_MEMORY_LIMIT=2G
CHROMADB_CPU_LIMIT=2.0

# Ollama resources
OLLAMA_MEMORY_LIMIT=4G
OLLAMA_CPU_LIMIT=4.0

# ==============================================
# DEPLOYMENT CONFIGURATION
# ==============================================
DEPLOYMENT_STRATEGY=rolling
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# ==============================================
# INSTRUCTIONS FOR SECURE DEPLOYMENT
# ==============================================
# 1. Copy this file: cp .env.production.template .env.production
# 2. Generate secure passwords:
#    - POSTGRES_PASSWORD: openssl rand -base64 32
#    - GRAFANA_PASSWORD: openssl rand -base64 32
#    - API_KEY: openssl rand -base64 32
#    - JWT_SECRET: openssl rand -base64 64
# 3. Update DOMAIN_NAME and ADMIN_EMAIL
# 4. Set proper file permissions: chmod 600 .env.production
# 5. Never commit .env.production to version control
